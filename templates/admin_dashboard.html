{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- <meta content="width=device-width, initial-scale=1.0" name="viewport"> -->
  <link rel="stylesheet" href="{%static 'css/style.css' %}">
  <title> FulfillKaro.pk - Index</title>
  <meta content="" name="description">
  <meta content="" name="keywords">
  <link href='https://fonts.googleapis.com/css?family=Roboto:400,100,300,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  <!-- <link rel="stylesheet" href="{%static 'css/style.css' %}"> -->
  <!-- Favicons -->
  <link href='{%static  "assets/img/favicon.png" %}' rel="icon">
  <link href='{%static "assets/img/apple-touch-icon.png" %}' rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href='{%static "assets/vendor/aos/aos.css" %}' rel="stylesheet">
  <link href='{%static "assets/vendor/bootstrap/css/bootstrap.min.css" %}' rel="stylesheet">
  <link href='{%static "assets/vendor/bootstrap-icons/bootstrap-icons.css" %}' rel="stylesheet">
  <link href='{%static "assets/vendor/boxicons/css/boxicons.min.css" %}' rel="stylesheet">
  <link href='{%static "assets/vendor/glightbox/css/glightbox.min.css" %}' rel="stylesheet">
  <link href='{%static "assets/vendor/swiper/swiper-bundle.min.css" %}' rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href='{%static "assets/css/style.css" %}' rel="stylesheet" %}'>

  <!-- =======================================================
  * Template Name: iPortfolio - v3.1.0
  * Template URL: https://bootstrapmade.com/iportfolio-bootstrap-portfolio-websites-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"
    integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
    crossorigin="anonymous"></script>


  <style>
    @media (max-width: 1199px) {
      #header {
        left: 0px;
      }

      #main {
        margin-left: 300px;
      }
    }


    .team-member-info {
      display: none;
    }

    #hero {
      width: 100%;
      height: 100vh;
      background: url(static/assets/img/courier5.jpg) top center;
      background-size: cover;
    }

    * {
      box-sizing: border-box;
    }

    /* Button used to open the contact form - fixed at the bottom of the page */
    .open-button {
      background-color: cornflowerblue;
      color: white;
      padding: 16px 20px;
      border: none;
      cursor: pointer;
      opacity: 0.8;
      /* position: fixed; */
      bottom: 23px;
      right: 28px;
      width: 280px;
    }

    .booking-table-popup {
      overflow: scroll;
      width: 700px;
      display: none;
      position: fixed;
      top: 0;
      bottom: 20px;
      right: 20px;
      border: 3px solid #f1f1f1;
      z-index: 9;
    }

    .booking-form-popup {
      overflow: scroll;
      width: 700px;
      display: none;
      position: fixed;
      top: 0;
      bottom: 20px;
      right: 20px;
      border: 3px solid #f1f1f1;
      z-index: 9;
    }

    /* The popup form - hidden by default */
    .form-popup {
      display: none;
      position: fixed;
      top: 0;
      bottom: auto;
      right: 15px;
      border: 3px solid #f1f1f1;
      z-index: 9;
    }

    /* Add styles to the form container */
    .form-container {
      max-width: 300px;
      padding: 10px;
      background-color: white;
    }

    .stock-form-container {
      max-width: 2000px;
      padding: 10px;
      background-color: white;
    }

    /* Full-width input fields */
    .form-container input[type=text],
    .form-container input[type=password] {
      width: 100%;
      padding: 15px;
      margin: 5px 0 22px 0;
      border: none;
      background: #f1f1f1;
    }

    /* Full-width input fields */
    .stock-form-container input[type=text],
    .stock-form-container input[type=password] {
      width: 100%;
      padding: 15px;
      margin: 5px 0 22px 0;
      border: none;
      background: #f1f1f1;
    }

    /* When the inputs get focus, do something */
    .form-container input[type=text]:focus,
    .form-container input[type=password]:focus {
      background-color: #ddd;
      outline: none;
    }

    /* When the inputs get focus, do something */
    .stock-form-container input[type=text]:focus,
    .stock-form-container input[type=password]:focus {
      background-color: #ddd;
      outline: none;
    }

    /* Set a style for the submit/login button */
    .form-container .btn {
      background-color: #04AA6D;
      color: white;
      padding: 16px 20px;
      border: none;
      cursor: pointer;
      width: 100%;
      margin-bottom: 10px;
      opacity: 0.8;
    }

    /* Set a style for the submit/login button */
    .stock-form-container .btn {
      background-color: #04AA6D;
      color: white;
      padding: 16px 20px;
      border: none;
      cursor: pointer;
      width: 100%;
      margin-bottom: 10px;
      opacity: 0.8;
    }

    /* Add a red background color to the cancel button */
    .form-container .cancel {
      background-color: red;
    }

    .form-container .next-btn {
      background-color: cornflowerblue;
    }

    /* Add some hover effects to buttons */
    .form-container .btn:hover,
    .open-button:hover {
      opacity: 1;
    }

    /* Add some hover effects to buttons */
    .stock-form-container .btn:hover,
    .open-button:hover {
      opacity: 1;
    }

    .alert {
      position: absolute;
      top: 10px;
      right: 10px;
      padding: 20px;
      z-index: 1000;
      background-color: #f44336;
      color: white;
      opacity: 1;
      transition: opacity 0.6s;
      margin-bottom: 15px;
    }

    .alert.success {
      background-color: #04AA6D;
    }

    .alert.info {
      background-color: #2196F3;
    }

    .alert.warning {
      background-color: #ff9800;
    }

    .closebtn {
      margin-left: 15px;
      color: white;
      font-weight: bold;
      float: right;
      font-size: 22px;
      line-height: 20px;
      cursor: pointer;
      transition: 0.3s;
    }

    .closebtn:hover {
      color: black;
    }


    .right-side-content {
      margin: 70px;
      width: 70%;
      float: right;
    }

    .rq {
      color:
        #FF0000;
      font-size: 10pt;
    }
  </style>
  <script>
    function showOrHideTable() {
      if ($('#Table td').length < 2) {
        document.getElementById("all-booking").style.display = "none";
      }
      else {
        document.getElementById("all-booking").style.display = "block";
      }

    }
    function showStats() {
      document.getElementById("statistics").style.display = "block";
    }
    function hideStats() {
      document.getElementById("statistics").style.display = "none";
    }
    function showTable() {
      document.getElementById("all-booking").style.display = "block";
    }
    function hideTable() {
      document.getElementById("all-booking").style.display = "none";
    }

    function showOrHideStats() {
      var x = document.getElementById("stat_data").textContent;
      if (x == "") {
        document.getElementById("statistics").style.display = "none";
      }
      else {
        document.getElementById("statistics").style.display = "block";
      }
    }
    function showOrHideStockForm() {
      var x = document.getElementById("vu").value;
      if (x == "") {
        document.getElementById("stock_form_section").style.display = "none";
      }
      else {
        document.getElementById("stock_form_section").style.display = "block";
      }
    }
    function showStockForm() {
      document.getElementById("stock_form_section").style.display = "block";
    }
    function closeAlert() {
      document.getElementById("message-box").style.display = "none";

    }
    function showOrHideProductSection() {
      if ($('#productTable td').length == 0) {
        document.getElementById("product_section").style.display = "none";
      }
      else {
        document.getElementById("product_section").style.display = "block";
      }
    }
   
    function showOrHideLeapordTrackingSection() {
      if ($('#leapord_tracking_table td').length == 0) {
        document.getElementById("leapord_tracking_section").style.display = "none";
      }
      else {
        document.getElementById("leapord_tracking_section").style.display = "block";
      }
    }
    function hide_product_section() {
      document.getElementById("product_section").style.display = "none";
    }

    function show_product_section() {
      document.getElementById("product_section").style.display = "block";
    }
    function hide_stock_form_section() {
      document.getElementById("stock_form_section").style.display = "none";
    }

    function show_customer_section() {
      document.getElementById("all_customers").style.display = "block";
    }
    function hide_customer_section() {
      document.getElementById("all_customers").style.display = "none";
    }
    function showOrHideCustomerSection() {
      var x=document.getElementById("checkForCustomerTable").textContent.length;
      if (x>2){
        document.getElementById("all_customers").style.display = "block";
      }
      else{
        document.getElementById("all_customers").style.display = "none";
      }

    }



    function validate() {

      var vu = document.getElementById('vu');
      // var vn = document.getElementById('vn');
      var pn = document.getElementById('pn');
      var pd = document.getElementById('pd');
      var sku = document.getElementById('sku');
      var qg = document.getElementById('qg');
      var pi = document.getElementById('pi');


      var text = "Make sure";
      var valid = true;
      if (vu.value == "") {
        document.getElementById("rq_vun").style.display = "block";
        text += " Vendor's Username  ";
        valid = false;
      }
      // if (vn.value == "") {
      //   document.getElementById("rq_vn").style.display = "block";
      //   text += " the Vendor's name  ";
      //   valid = false;
      // }

      if (pn.value == "") {
        document.getElementById("rq_pn").style.display = "block";
        text += (!valid ? '& ' : '') + " the Product name  "
        valid = false;

      }
      if (pd.value == "") {
        document.getElementById("rq_pd").style.display = "block";
        text += (!valid ? '& ' : '') + " the  Product description ";
        valid = false;

      }
      if (sku.value == "") {
        document.getElementById("rq_sku").style.display = "block";
        text += (!valid ? '& ' : '') + " the SKU ";
        valid = false;
      }
      if (qg.value == "") {
        document.getElementById("rq_qg").style.display = "block";
        text += (!valid ? '& ' : '') + " the Quantity given ";
        valid = false;
      }
      if (pi.value == "") {
        document.getElementById("rq_pi").style.display = "block";
        text += (!valid ? '& ' : '') + " the Product Image ";
        valid = false;
      }



      if (!valid) {
        text += " is Filled";
        alert(text);
        return false;
      }
      return true;
    }
    function hideReq() {
      document.getElementById("rq_vun").style.display = "none";
      // document.getElementById("rq_vn").style.display="none";
      document.getElementById("rq_pn").style.display = "none";
      document.getElementById("rq_pd").style.display = "none";
      document.getElementById("rq_sku").style.display = "none";
      document.getElementById("rq_qg").style.display = "none";
      document.getElementById("rq_pi").style.display = "none";

    }

    function showOrHideMsg() {
      if (document.getElementById("msg") != null) {
        alert(document.getElementById("msg").textContent)
      }
    }
    function show_leapord_tracking_section() {
      document.getElementById("leapord_tracking_section").style.display = "block";
    }
    function hide_leapord_tracking_section() {
      document.getElementById("leapord_tracking_section").style.display = "none";
    }
  

    function showOrHide_nci_section(){

  if ($('#nciTable td').length == 0) {
        document.getElementById("nci_section").style.display = "none";
      }
      else {
        document.getElementById("nci_section").style.display = "block";
      }
}
function showOrHide_active_nci_section(){

if ($('#active_nci td').length == 0) {
      document.getElementById("active_nci_section").style.display = "none";
    }
    else {
      document.getElementById("active_nci_section").style.display = "block";
    }
}

function hide_nci_section(){
  document.getElementById("nci_section").style.display = "none";
}

$(document).ready(function() {
    $('#Table').DataTable( {
         order: [[3, 'desc']],
        "pagingType": "full_numbers"

    } );
} );



  </script>

</head>

<body class="" onload="showOrHide_active_nci_section(), showOrHide_nci_section(), hide_leapord_tracking_section(), hideReq(), showOrHideTable(),showOrHideMsg(), 
  showOrHideStats(), showOrHideStockForm(), showOrHideProductSection(), showOrHideCustomerSection()
  showOrHideLeapordTrackingSection()">

  {% for message in messages %}
  <div hidden class="alert" id="message-box">
    <span onclick="closeAlert()" class="closebtn">&times;</span>
    <strong id="msg"> {{message}} </strong>
  </div>
  {% endfor %}





  <!-- ======= Mobile nav toggle button ======= -->
  <!-- <i class="bi bi-list mobile-nav-toggle d-xl-none"></i> -->

  <!-- ======= Header ======= -->
  <header id="header">
    <div class="d-flex flex-column">

      <div class="profile">
        <img src=' {%static "assets/img/fulfillkaro-logo.jpg" %}' alt="" class="img-fluid rounded-circle">

        <h1 class="text-light"> Welcome, Admin !</h1>

        <div class="social-links mt-3 text-center">
          <!-- <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a> -->
          <a href="https://www.facebook.com/fulfillkaro" target="_blank" class="facebook"><i
              class="bx bxl-facebook"></i></a>
          <a href="https://www.instagram.com/fulfillkaro/" target="_blank" class="instagram"><i
              class="bx bxl-instagram"></i></a>
          <!-- <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
          <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a> -->
        </div>
      </div>

      <nav id="navbar" class="nav-menu navbar">
        <ul style="height: 335px ;">
          <!-- <li><a href="goto_home" class="nav-link scrollto "><i class="bx bx-home"></i> <span>Home</span></a></li> -->
          <!-- <li><a href="#about" class="nav-link scrollto"><i class="bx bx-server"></i> <span>About</span></a></li> -->
          <form method="POST" action="getStatistics">
            {% csrf_token%}
            <input class="input--style-4" type="text" name="username" value={{user.username}} readonly hidden>
            <button onclick="hide_product_section()" style="background-color:#040b14;color:darkgrey ; border: none;"
              type="submit">
              <li type="submit"><a class="nav-link scrollto"><i class="bx bx-book-content"></i>
                  <span class="team-member">Home</span></a></li>
            </button>
          </form>

          <li class="" onclick="hideStats(), showTable(), hide_product_section(), hide_leapord_tracking_section()"><a
              href="done_booking" class="nav-link scrollto "><i class="bx bx-book-content"></i>
              <span style="color:darkgrey ;" class="team-member">View All Bookings </span></a></li>


          <li
            onclick="hide_nci_section(), hideStats(),hideTable(), showStockForm(), hide_product_section(),hide_leapord_tracking_section()">
            <a style="color:darkgrey ;" class="nav-link scrollto"><i class="bx bx-server"></i> <span> Add New Stock
              </span></a>
          </li>

          <li
            onclick="hide_customer_section(), hideStats(),hideTable(), show_product_section(), hide_stock_form_section(),hide_leapord_tracking_section()">
            <a style="color:darkgrey ;" class="nav-link scrollto"><i class="bx bx-server"></i> <span> Products
              </span></a>
          </li>

          <form method="POST" action="showAllCustomers">
            {% csrf_token%}
            <!-- <input class="input--style-4" type="text" name="username" value={{user.username}} readonly hidden> -->
            <button
              onclick="hide_product_section(), hide_stock_form_section(),hideStats(),hideTable(),hide_leapord_tracking_section(), show_customer_section()"
              style="background-color:#040b14;color:darkgrey ; border: none;" type="submit">
              <li type="submit"><a class="nav-link scrollto"><i class="bx bx-book-content"></i>
                  <span class="team-member"> All Customers </span></a></li>
            </button>
          </form>

          <li
            onclick="hide_nci_section(), hideStats(),hideTable(), hide_product_section(), hide_customer_section(), hide_stock_form_section(), show_leapord_tracking_section()">
            <a style="color:darkgrey ;" class="nav-link scrollto"><i class="bx bx-server"></i> <span> Leapord Tracking
              </span></a>
          </li>

          <form method="POST" action="get_nci_for_admin">
            {% csrf_token %}
            <!-- <input type="text" name="username" value="{{user.username}}" hidden> -->
            <!-- <input type="text" name="amiadmin" value="0" hidden > -->
            <button style="background-color:#040b14;color:darkgrey ;border: none; " type="submit">
              <li><a onclick="" class="nav-link scrollto"><i class="bx bx-file-blank"></i> <span>
                    NCI </span></a></li>
            </button>
          </form>

          <!-- <li><a href="#contact" class="nav-link scrollto"><i class="bx bx-envelope"></i> <span>Contact</span></a></li> -->

          <button style="background-color:cornflowerblue;">
            <li><a href="logout" class=""> <span style=" color:black;  ">Logout </span></a></li>
          </button>


          <!-- <button class="open-button " onclick="openForm()">Login or Sign up</button> -->

        </ul>
      </nav>
    </div>
  </header>

  <main id="main" style="padding-left: 20px ; padding-right: 20px ;">
    <br><br>
    <h1 style="text-align:center ;"><strong>Admin Dashboard </strong> </h1>


    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
        class="bi bi-arrow-up-short"></i></a>








    <!-- =========== Statistics =============== -->
    <!-- ICONS FROM https://icons.getbootstrap.com/ -->


    <section id="statistics" class=" facts team-member-info">
      <div class="row no-gutters">

        <div class="col-lg-4 col-md-6 d-md-flex align-items-md-stretch" data-aos="fade-up">
          <div class="count-box">
            <i class="bi bi-bar-chart-line-fill"></i>
            <span id="stat_data">{{total_bookings}}</span>

            <p><strong>Total Orders</strong></p>
          </div>
        </div>

        <div class="col-lg-4 col-md-6 d-md-flex align-items-md-stretch" data-aos="fade-up" data-aos-delay="100">
          <div class="count-box">
            <i class="bi bi-check-square-fill"></i>
            <span>{{total_delivered_bookings}} </span>
            <p><strong>Total Delivered Parcels </strong> </p>
          </div>
        </div>


        <div class="col-lg-4 col-md-6 d-md-flex align-items-md-stretch" data-aos="fade-up" data-aos-delay="300">
          <div class="count-box">
            <i class="bi bi-arrow-clockwise"></i>
            <span> {{total_returned_bookings}} </span>
            <p><strong>Total Returned Bookings </strong> </p>
          </div>
        </div>


        <div class="col-lg-4 col-md-6 d-md-flex align-items-md-stretch" data-aos="fade-up" data-aos-delay="300">
          <div class="count-box">
            <i class="bi bi-credit-card-2-front-fill"></i>
            <span> Rs. --- </span>
            <p><strong>Payment Last Month</strong> </p>
          </div>
        </div>


        <div class="col-lg-4 col-md-6 d-md-flex align-items-md-stretch" data-aos="fade-up" data-aos-delay="100">
          <div class="count-box">
            <i class="bi bi-truck"></i>
            <span>{{delivery_rate}} % </span>
            <p><strong>Delivered Rate</strong> </p>
          </div>
        </div>

        <div class="col-lg-4 col-md-6 d-md-flex align-items-md-stretch" data-aos="fade-up" data-aos-delay="200">
          <div class="count-box">
            <i class="bi bi-bar-chart-line"></i>
            <span>{{return_rate}} % </span>
            <p><strong>Return Rate</strong></p>
          </div>
        </div>

      </div>
    </section>
    <!-- =========== Statistics END =============== -->

    <!-- =========== Booking Table =============== -->
    <section id="all-booking" class="">
      <div class="table-wrap hero-container ">
        <h3 style="text-align: center ; color:blue;">Booking Details </h3>
        <br>



        
          <div class="row">
            <div class="col col-6">
              <input type="text" name="username" value={{user.username}} hidden>
              <label> <strong> Consignment #: </strong> </label> <br>

              <input id="myInput" onkeyup="searchFunction()"
                style=" width:250px;  border-radius:10px;padding:10px; border: 2px; box-shadow:0 0 15px 4px rgba(0,0,0,0.06); "
                type="text" name="cn_number" placeholder="Enter CN Number">

              <button style="margin-left: 5px;" class="btn btn-primary" type="submit"> Search </button> <br><br>
              <!-- <input class="btn btn-primary" type="submit" name="save_changes" value={{book.cn_number}}  readonly > -->
            </div>

          </div>


          <!-- Data From -->
          <form name="form1" method="POST" action="searchDateWise">
            {% csrf_token %}
            <div class="row">
              <div class="col-5">

                <input type="text" name="username" value={{user.username}} hidden>
                <label> <strong> Date From: </strong> </label> <br>
                <input
                  style=" width:250px;  border-radius:10px;padding:10px; border: 2px; box-shadow:0 0 15px 4px rgba(0,0,0,0.06); "
                  type="date" placeholder="dd-mm-yyyy" name="from_date" id="search_fd">

                <!-- Date From End -->

              </div>
              <div class="col-5">
                <!------------ Date To ------------>

                <label> <strong> Date To: </strong> </label> <br>
                <input
                  style=" width:250px;  border-radius:10px;padding:10px; border: 2px; box-shadow:0 0 15px 4px rgba(0,0,0,0.06); "
                  type="date" placeholder="dd-mm-yyyy" name="to_date" id="search_td">
                <br><br>
              </div>
              <div class="col-2"><br>
                <button style="margin-left: 5px;" class="btn btn-primary" type="submit"> Search
                </button> <br><br>
              </div>
            </div>
          </form>

          <link rel="stylesheet" href="https://cdn.datatables.net/1.10.13/css/jquery.dataTables.min.css">

          <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"></script>


          <table style="font-size:x-small ; text-align: center;" id="Table" class=" myTable">
          <thead class="thead-primary">
            <tr class="header" style="background-color:black ; color: white ;">
              <th>CN Number</th>
              <th>Name</th>
              <th>Mobile Number</th>
              <th>Email</th>
              <th>Address</th>
              <th>Destination Address</th>
              <th>Product Detail</th>
              <th>Weight</th>
              <th>Pieces</th>
              <th>Special Handling</th>
              <th>Service Type</th>
              <th>Pickup City</th>
              <th>Cash Amount</th>
              <th>Status</th>
              <th>Date and Time</th>
              <th></th>
              <th></th>
            </tr>
          </thead>
          <tbody>


            {% for book in all_bookings%}
            <tr style="border-bottom: 1px solid gray ;">
              <td><strong> {{book.cn_number}} </strong> </td>
              <!-- <td>55456400001</td> -->
              <td style=" background-color: aliceblue;"> {{book.name}}</td>
              <td> {{book.mobile_number}} </td>
              <td style=" background-color: aliceblue;"> {{book.email}} </td>
              <td> {{book.address}}</td>
              <td style=" background-color: aliceblue;"> {{book.destination_city}}</td>
              <td> {{book.product_detail}} </td>
              <td style=" background-color: aliceblue;"> {{book.weight}} </td>
              <td> {{book.pieces}} </td>
              <td style=" background-color: aliceblue;"> {{book.special_handling}} </td>
              <td> {{book.service_type}} </td>
              <td style=" background-color: aliceblue;"> {{book.pickup_city}} </td>
              <td> {{book.cash_amount}} </td>


              <!-- <td> <form method="POST" action="delete_booking">
                {% csrf_token%}
                <input class="btn btn-danger" type="submit" name="delete_record" value={{book.cn_number}}  readonly >
                </form> 
            </td> -->

              <form method="POST" action="save_changes">
                {% csrf_token%}
                <input type="text" name="reattempt" value="0" hidden>
                <td>
                  <select name="status" style="width: 80px;">
                    <option disabled="disabled" selected="selected" aria-placeholder={{book.status}}> {{book.status}}
                    </option>
                    <option> Booked </option>
                    <option> Picked by FulfillKaro </option>
                    <option> Packed by FulfillKaro </option>
                    <option> Prepared for Movement to Destination City </option>
                    <option> Arrival at Origin </option>
                    <option> Physically Loaded for movement to Destination City </option>
                    <option> In-Transit </option>
                    <option> Loading Complete </option>
                    <option> On the Way to be Deivered </option>
                    <option>Delivered</option>
                    <option> Refused by Customer</option>
                    <option> Loaded for Return to Shipper </option>
                    <option> Returned to Shipper </option>
                    <option> Shipment is hold in operation due to a specific reason </option>
                    <option> Consignee refused to accept the order </option>
                    <option> Consignee is not available at provided address </option>
                    <option> Consignee's address found closed upon attempt </option>
                    <option> Consignee requested to hold the delivery for a specific time to be delivered on a specific
                      day </option>
                    <option> (Non Service Area) or (Consignee's address pertains to area beyond our service list)
                    </option>
                    <option> Shipment is hold at destination city to be collected physically from Office </option>
                    <option> Shipment is undelivered due to non availability of cash with receiving person (Consignee)
                    </option>
                    <option> Shipment is undeliverable due to incomplete address </option>
                    <option> Shipment is on hold for shipper's advice </option>
                    <option> Unable to locate/Unable to contact </option>
                    <option> Consignee is out of city and not available at his address </option>
                    <option> Consignee is permanently shifted from provided address </option>
                    <option> There is no person matching consignee name at provided address </option>
                    <option> Held For Self Collection </option>
                    <option>Arrived at Station </option>
                    <option>Delivery Address Closed </option>
                  </select>
                </td>
                <td> {{book.dateTime}} </td>
                <td>
                  <input class=" " type="text" name="cn_number" value={{book.cn_number}} readonly hidden>
                  <!-- <input class=" " type="text" name="username" value="{{book.username}}" readonly hidden> -->
                  <input class=" " type="text" name="product_description" value={{book.product_detail}} readonly hidden>
                  <input class=" " type="text" name="pieces" value={{book.pieces}} readonly hidden>
                  <button class="btn btn-primary" type="submit"> SAVE </button> <br><br>
                  <!-- <input class="btn btn-primary" type="submit" name="save_changes" value={{book.cn_number}}  readonly > -->
                </td>

              </form>
              <form method="POST" action="delete_booking">
                <input class=" " type="text" name="cn_number" value="{{book.cn_number}}"  hidden>
                <input class=" " type="text" name="statu" value="{{book.status}}"  hidden>
                <td><button onclick="return confirm('Are you sure you want to DELETE this Record ?')"
                    class="btn btn-danger type=" submit"> DELETE </button> <br><br> </td>
                {% csrf_token%}
              </form>


            </tr>
            {% endfor %}

          </tbody>
        </table>



      </div>
    </section>

    <!-- =========== Booking Table END =============== -->



    <!-- ======== Stock Form =========== -->
    <section id="stock_form_section">
      <h2 style="font-family:fantasy; text-align: center;"> Enter New Stock Detail </h2><br><br>
      <div>
        <form enctype="multipart/form-data" method="POST" action="save_stock_record" class="stock-form-container">
          {% csrf_token %}
          <div class="row">
            <div class="col-6">
              <div class=" ">
                <label class="label">Vendor's Username</label>
                <p class="rq" id="rq_vun">*Required Field </p>
                <input id="vu" class=" " type="text" name="username">
              </div>
            </div>
            <div class=" col-6">
              <div>
                <label class="label">Vendor's Full Name</label>
                <!-- <p class="rq" id="rq_vn">*Required Field </p> -->
                <input id="vn" type="text" name="vendor_name">
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class=" ">
                <label class="label"> Product Name </label>
                <p class="rq" id="rq_pn">*Required Field </p>
                <input id="pn" class=" " type="text" name="product_name">
              </div>
            </div>
            <div class=" col-6">
              <div>
                <label class="label">Product Description </label>
                <p class="rq" id="rq_pd">*Required Field </p>
                <input id="pd" type="text" name="product_description">
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <div class=" ">
                <label class="label"> SKU (Stock Keeping Unit) </label>
                <p class="rq" id="rq_sku">*Required Field </p>
                <input id="sku" class=" " type="text" name="sku">
              </div>
            </div>
            <div class=" col-6">
              <div>
                <label class="label">Quantity Given</label>
                <p class="rq" id="rq_qg">*Required Field </p>
                <input id="qg" type="text" name="quantity_given">
              </div>
            </div>
          </div>


          <div class="row">

            <div class=" col-6">
              <div>
                <label class="label">Upload Image </label><br>
                <p class="rq" id="rq_pi">*Required Field </p>
                <input id="pi" type="file" name="product_image">
                <br><br>

              </div>
            </div>
          </div>
          <button onclick=" return validate()" class="btn btn-primary" type="submit"> Done </button>

        </form>
      </div>
    </section>

    <!-- ======== Stock Form End  =========== -->

    <!-- ======== Product Section ========== -->


    <section id="product_section">
      <div class="table-wrap hero-container ">
        <form method="POST" action="showProducts">
          {% csrf_token %}
          <label><strong> Vendor's Username: </strong></label><br>
          <input type="text" name="amiadmin" value="1" hidden>
          <input id="vendor_name"
            style=" width:250px;  border-radius:10px;padding:10px; border: 2px; box-shadow:0 0 15px 4px rgba(0,0,0,0.06); "
            type="text" name="username" placeholder="Enter Vendor's Username">

          <button style="margin-left: 5px;" class="btn btn-primary" type="submit"> Search </button> <br><br>

        </form>
        <table id="productTable" class="">
          <thead class="thead-primary">
            <tr class="header"
              style="background-color:black ; color: white; font-weight:lighter; font-size: small; text-align:center;">
              <th>Product Image</th>
              <th>Product Name</th>
              <th>Product Description </th>
              <th>Product SKU </th>
              <th>Quantity Given </th>
              <th>Quantity In-Process </th>
              <th>Quantity Sold </th>
              <th>Quantity Available </th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            {% for prod in all_Products %}
            <tr>

              <form method="POST" action="editProduct">
                {% csrf_token%}
                <td> <img src='/media/{{prod.product_image}}' width="225" height="225" </td>
                <td> {{prod.product_name}} </td>
                <td> {{prod.product_description}} </td>
                <td> <input style="width:50px; border:none" type="text" value={{prod.sku}} name="sku" readonly> </td>
                <td> <input style="width:50px; border:none" type="text" value={{prod.quantity_given}}
                    name="quantity_given" </td>
                <td> <input style="width:50px; border:none" type="text" value={{prod.quantity_in_process}}
                    name="quantity_in_process" </td>
                <td> <input style="width:50px; border:none" type="text" value={{prod.quantity_sold}}
                    name="quantity_sold" </td>
                <td> <input style="width:50px; border:none" type="text" value={{prod.quantity_available}}
                    name="quantity_available" </td>
                <td> <button class="btn btn-primary" type="submit"> SAVE </button> <br><br> </td>
              </form>
            </tr>

            {% endfor %}
          </tbody>
        </table>
      </div>
    </section>

    <!-- ======== Product Section END ========== -->



    <!-- All Customers Section -->
    <section id="all_customers">
      <table id="customerTable" class=" myTable" style="overflow-x: auto; ">
        <thead class="thead-primary">
          <tr class="header" style="background-color:black ; color:white ;">
            <th>Customer Username</th>
            <th>Customer Consignment Id</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
        
          <tr>
            <td id="checkForCustomerTable" style="border-right: 1px solid gray ;padding: 5px "> {{context.username}} </td>
            <td style="padding: 5px "> {{context.customer_id}} </td>

          </tr>

        </tbody>
      </table>

    </section>

    <!-- All Customers Section END -->



    <!-- =========== LEAPORD TRACKING SECTION ============ -->

    <section id="leapord_tracking_section">

      <form method="POST" , action="show_api">
        {% csrf_token %}
        <input type="text" name="username" value={{user.username}} hidden>
        <label> <strong> Leapord Tracking #: </strong> </label> <br>

        <input id="myInput" onkeyup="searchFunction()"
          style=" width:250px;  border-radius:10px;padding:10px; border: 2px; box-shadow:0 0 15px 4px rgba(0,0,0,0.06); "
          type="text" name="leapord_tracking_number" placeholder="Enter Tracking Number">

        <button style="margin-left: 5px;" class="btn btn-primary" type="submit"> Search </button> <br><br>
        <!-- <input class="btn btn-primary" type="submit" name="save_changes" value={{book.cn_number}}  readonly > -->

      </form>

      <h4> Tracking Details </h4> <br><br>
      <hr>
      <div style="font-size: 12px;">
        {% for i in tracking_detail %}
        <div class="row">
          <div class="col col-6">
            <label> From </label>
            <h5> {{i.origin_city_name}} </h5>
          </div>
          <div class="col col-6">
            <label> To </label>
            <h5> {{i.destination_city_name}} </h5>
          </div>
        </div>
        <br>
        <hr>
        <br>
        <div class="row">
          <div class="col col-4">
            <label> <strong> Track # </strong> </label>
            <input style="border:none ; font-weight:bold;" type="text" name="" value={{i.track_number}} readonly>
          </div>
          <div class="col col-8">
            <label> <strong> Reference # / Order Id </strong> </label>
            <input style="border:none ;width:400px ;" type="text" name="" value={{i.booked_packet_order_id}} readonly>
          </div>
        </div>

        <div class="row">
          <div class="col col-4">
            <label> <strong> No. of Pieces </strong> </label>
            <input style="border:none ;" type="text" name="" value={{i.booked_packet_no_piece}} readonly>
          </div>
          <div class="col col-8">
            <label><strong> Packet Weight </strong> </label>
            <input style="border:none ;width:400px ;" type="text" name="" value={{i.arival_dispatch_weight}} readonly>
          </div>
        </div>

        <div class="row">
          <div class="col col-4">
            <label><strong> Shipper Name </strong> </label>
            <input style="border:none ;" type="text" name="" value="{{i.shipment_name_eng}}" readonly>
          </div>
          <div class="col col-8">
            <label><strong> Shippment Address</strong> </label>
            <input style="border:none ;width:400px ;" type="text" name="" value="{{i.shipment_address}}" readonly>
          </div>
        </div>

        <div class="row">
          <div class="col col-4">
            <label><strong> Consignee Name </strong> </label>
            <input style="border:none ;" id="checkForEmpty" style="color:black ;" type="text" name=""
              value="{{i.consignment_name_eng}}" readonly>
          </div>
          <div class="col col-8">
            <label> <strong> Consignee Address </strong> </label>
            <input style="border:none ;width:400px ;" type="text" name="" value="{{i.consignment_address}}" readonly>
          </div>
        </div>
        <label> <strong> Booked Packet Id </strong> </label>
        <input style="border:none ;width:400px ;" type="text" name="" value="{{i.booked_packet_id}}" readonly>



        <table id="leapord_tracking_table">
          <thead>
            <tr>
              <th> Date and Time</th>
              <th> Status </th>
            </tr>
          </thead>
          <tbody>
            {% for j in i.td %}

            <tr>
              <td><input type="text" name="" value="{{j.Activity_datetime}}" readonly> </td>

              <td> <input style="width:500px ;" type="text" name="" value="{{j.Status}}" readonly> </td>
            </tr>

            {% endfor %}
          </tbody>
          <br><br>
          {% endfor %}


        </table>
      </div>


    </section>

    <!-- =========== LEAPORD TRACKING SECTION END ============ -->




    
<!-- ============ NCI Section ============== -->
<section id="nci_section" >
  <h3> NCI Parcels </h3> <br>
  <!-- <div class="table-wrap hero-container " >
    <table style="font-size:x-small ; text-align: center;" id="nciTable" class=" myTable">
      <thead class="thead-primary">
        <tr class="header" style="background-color:black ; color: white ;">
          <th>Username</th>
          <th>CN Number</th>
          <th>No. of Active NCI </th>
          </tr>
      </thead>
      <tbody>
        {% for book in active_nci%}
        <tr>
          <td>{{book.username}}</td>
          <td>{{book.cn_number}}</td>
          <td>{{book.username}}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
  <br><br> -->
    <div class="table-wrap hero-container " >
      <table style="font-size:medium ; text-align: center; width: 100%;" id="nciTable" class=" myTable">
        <thead class="thead-primary">
          <tr class="header" style="background-color:black ; color: white ;">
            <th>CN Number</th>
            <th>Name</th>
            <th>Mobile Number</th>
   
            <th>Address</th>
            <th>Vendor's Choice</th>
            <th>Status</th>
    
          </tr>
        </thead>
        <tbody>
          {% if msg == "No Record Found !" %}
          <td> <h2> {{msg}}</h2> </td>
          {% endif %}
          
          {% for book in active_nci%}
          <tr style="border-bottom: 1px solid gray ;">
          
            <td><strong> {{book.cn_number}} </strong> </td>
            <td style=" background-color: aliceblue;"> {{book.name}}</td>
            <td> {{book.mobile_number}} </td>        
            <td style=" background-color: aliceblue;"> {{book.address}}</td>
            <td> {{book.choice}}</td>
            <td style=" background-color: aliceblue;">{{book.status}}</td>
          </tr>
          {% endfor %}

        </tbody>
      </table>
    </div>
    <br><br>
    <form method="POST" action="get_total_reattempts">
      {% csrf_token %}
      <button class="btn btn-primary" type="submit"> No. of Re-attempts </button>
    </form>
    
    
    

</section>

<!-- ============ NCI Section END ============== -->

<!-- ================ Active NCI Section =============== -->
<section id="active_nci_section">
  <div class="table-wrap hero-container " >
    <table style="font-size:medium ; text-align: center; width: 70%;" id="active_nci" class=" myTable">
      <thead class="thead-primary">
        <tr class="header" style="background-color:black ; color: white ;">
        <th> Consignment # </th>
        <th> Vendor's Username </th>
        <th> No. of Active NCI's </th>
      </tr>
    </thead>
    <tbody>
      {% for active in list_active_nci %}
      <tr>
        <td style=" background-color: aliceblue;">{{active}}</td>
        <!-- <td style=" background-color: aliceblue;">{{active.cn_list.cn_number}}</td>
        {% for active0 in active.cn_list%}
          <td style=" background-color: aliceblue;">{{active0}}</td>
        {% endfor %}
        {% for active1 in active.username_list%}
          <td>{{active1}}</td>
        {% endfor %}
        {% for active2 in active.total_active_nci%}
          <td style=" background-color: aliceblue;">{{active2}}</td>
        {% endfor %} -->
      </tr>
      {% endfor %}
    </tbody>
  </table>
  </div>
</section>
<!-- ================ Active NCI Section END =============== -->

  </main>
  <!-- End #main -->




  <!-- ======= Footer ======= -->
  <!-- <footer id="footer" style="height: 50px ;">
    <div class="container">
      <div class="copyright">
        &copy; Copyright <strong><span>FulfillKaro.pk</span></strong>
      </div>
      <div class="credits">
       Designed by <a href="https://www.fulfillkaro.pk/"> FulfillKaro</a>
      </div>
    </div>
  </footer> -->
  <!-- End  Footer -->

  <!-- Vendor JS Files -->
  <script src=' {%static "assets/vendor/aos/aos.js" %}'></script>
  <script src=' {%static "assets/vendor/bootstrap/js/bootstrap.bundle.min.js" %}'></script>
  <script src=' {%static "assets/vendor/glightbox/js/glightbox.min.js" %}'></script>
  <script src=' {%static "assets/vendor/isotope-layout/isotope.pkgd.min.js" %}'></script>
  <script src=' {%static "assets/vendor/php-email-form/validate.js" %}'></script>
  <script src=' {%static "assets/vendor/purecounter/purecounter.js" %}'></script>
  <script src=' {%static "assets/vendor/swiper/swiper-bundle.min.js" %}'></script>
  <script src=' {%static "assets/vendor/typed.js/typed.min.js" %}'></script>
  <script src=' {%static "assets/vendor/waypoints/noframework.waypoints.js" %}'></script>

  <!-- Template Main JS File -->
  <script src=' {%static "assets/js/main.js" %}'></script>

  <script>
    const teamMember = document.getElementsByClassName("team-member");
    const teamMemberInfo = document.getElementsByClassName("team-member-info");

    function searchFunction() {
      var input, filter, table, tr, td, i, txtValue;
      input = document.getElementById("myInput");
      filter = input.value.toUpperCase();
      table = document.getElementById("Table");
      tr = table.getElementsByTagName("tr");
      for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[0];
        if (td) {
          txtValue = td.textContent || td.innerText;
          if (txtValue.toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }
      }
    }


  </script>